apiVersion: v1
kind: List

items:


# --------------------------=== POD DEPLOYMENT 0 ===--------------------------

#------------------- PersistentVolume for bootnode/genessis file ------------------
#shared among all nodes

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-bootnode
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi

- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: bootnode
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/bootnode"

#------------------- config for bootnode private key ------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-bootnode
    namespace: ethereum-net
    labels:
      app: bootnode
      name: keystore-config-bootnode
  data:
    key: |-
      0xe68dcb483578c71ec83dabfb6bd5084c8da683d82571f3543a278c6dc5520c89

#------------------- config file for bootnode ------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-bootnode
    namespace: ethereum-net
    labels:
      app: bootnode
      name: besuconfig-bootnode
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"] 
      rpc-http-cors-origins=["*"]
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      
#---------------------------------= BOOT NODE SERVICE =---------------------------------------

- apiVersion: v1
  kind: Service
  metadata:
    namespace: ethereum-net
    name: besu-bootnode-svc
    labels:
      app: bootnode
      tier: backend
      name: besu-bootnode-svc
  spec:
    selector:
      app: bootnode
      tier: backend
      name: bootnode
    type: ClusterIP
    #externalTrafficPolicy: Cluster
    ports:
      - name: besu-bootnode-ipc-discovery
        protocol: UDP
        port: 30303
        targetPort: 30303


- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    name: besu-bootnode
    labels:
      app: bootnode
      tier: backend
      name: besu-bootnode
  spec:
    selector:
      matchLabels:
        app: bootnode
    replicas: 1
    serviceName: besu-bootnode
    template:
      metadata:
        name: besu-bootnode
        labels:
          app: bootnode
          tier: backend
          name: bootnode
      spec:
        containers:
        - name: besu-bootnodeinit-container
          image: hyperledger/besu:latest
          imagePullPolicy: IfNotPresent
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/besu/bootnode;rm -rf /etc/testnet/bootnode; mkdir -p /etc/testnet/bootnode;
            mkdir -p /etc/besu/bootnode;
            cp /etc/besuconfigmap/bootnode/besuconfig.toml /etc/besu/bootnode;
            /opt/besu/bin/besu --data-path=/etc/testnet/bootnode --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/bootnode/besuconfig.toml;"
          volumeMounts:
          - name: bootnode-persistent-storage
            mountPath: /etc/testnet/bootnode/storage
          - name: bootnode-config-persistent-storage
            mountPath: /etc/besuconfigmap/bootnode
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/bootnode/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-bootnode
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: bootnode-persistent-storage
          persistentVolumeClaim:
          claimName: volume-bootnode
        - name: bootnode-config-persistent-storage
          configMap:
            name: besuconfig-bootnode
            items:
            - key: besuconfig
              path: besuconfig.toml
        
        

#---------------------------------=NODES PERSISTANT VOLUME 0=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner0
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner0"
#--------------------------=PERSISTENT VOLUME CLAIM 0=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner0
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 1 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner1
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner1
  data:
    key: |-
      0x1d8af7e6361ff3b825f32cb5292b6522113aca560a446e0954d093b61df753d7

#---------------------------------=CONFIG MAP NODE 1=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner1
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner1
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner1
      serviceSelector: ethereum-node
    name: besu-miner1
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner1
    template:
      metadata:
        name: besu-miner1
        labels:
          app: miner
          tier: backend
          name: miner1
      spec:
        containers:
        - name: miner1-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner1; mkdir /etc/testnet/miner1; rm -rf /etc/besu/miner1;
            mkdir -p /etc/besu/miner1;
            cp /etc/besuconfigmap/miner1/besuconfig.toml /etc/besu/miner1;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner1/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner1/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner1-persistent-storage
            mountPath: /etc/testnet/miner1
          - name: miner1-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner1
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner1/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner1
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner1-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner1
        - name: miner1-config-persistent-storage
          configMap:
            name: besuconfig-miner1
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 1=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner1-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner1-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner1
    ports:
      - name: miner1-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner1-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner1-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner1-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 1=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner1
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner1"
#--------------------------=PERSISTENT VOLUME CLAIM 1=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner1
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 2 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner2
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner2
  data:
    key: |-
      0xd55f8e64fead16448851ade549eb6157fd893aff50e94905753ca2e5790ea029

#---------------------------------=CONFIG MAP NODE 2=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner2
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner2
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner2
      serviceSelector: ethereum-node
    name: besu-miner2
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner2
    template:
      metadata:
        name: besu-miner2
        labels:
          app: miner
          tier: backend
          name: miner2
      spec:
        containers:
        - name: miner2-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner2; mkdir /etc/testnet/miner2; rm -rf /etc/besu/miner2;
            mkdir -p /etc/besu/miner2;
            cp /etc/besuconfigmap/miner2/besuconfig.toml /etc/besu/miner2;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner2/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner2/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner2-persistent-storage
            mountPath: /etc/testnet/miner2
          - name: miner2-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner2
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner2/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner2
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner2-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner2
        - name: miner2-config-persistent-storage
          configMap:
            name: besuconfig-miner2
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 2=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner2-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner2-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner2
    ports:
      - name: miner2-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner2-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner2-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner2-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 2=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner2
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner2"
#--------------------------=PERSISTENT VOLUME CLAIM 2=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner2
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 3 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner3
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner3
  data:
    key: |-
      0xa01c08526930d4bd61040788c393f9f1e76ebc1fb3b78993b3a4ea2969689771

#---------------------------------=CONFIG MAP NODE 3=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner3
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner3
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner3
      serviceSelector: ethereum-node
    name: besu-miner3
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner3
    template:
      metadata:
        name: besu-miner3
        labels:
          app: miner
          tier: backend
          name: miner3
      spec:
        containers:
        - name: miner3-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner3; mkdir /etc/testnet/miner3; rm -rf /etc/besu/miner3;
            mkdir -p /etc/besu/miner3;
            cp /etc/besuconfigmap/miner3/besuconfig.toml /etc/besu/miner3;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner3/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner3/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner3-persistent-storage
            mountPath: /etc/testnet/miner3
          - name: miner3-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner3
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner3/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner3
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner3-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner3
        - name: miner3-config-persistent-storage
          configMap:
            name: besuconfig-miner3
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 3=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner3-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner3-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner3
    ports:
      - name: miner3-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner3-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner3-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner3-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 3=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner3
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner3"
#--------------------------=PERSISTENT VOLUME CLAIM 3=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner3
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 4 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner4
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner4
  data:
    key: |-
      0x2b42885b157248b018ec95effb57bb2df3d94e85d03a571c5f0ac8a38c4aaea8

#---------------------------------=CONFIG MAP NODE 4=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner4
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner4
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner4
      serviceSelector: ethereum-node
    name: besu-miner4
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner4
    template:
      metadata:
        name: besu-miner4
        labels:
          app: miner
          tier: backend
          name: miner4
      spec:
        containers:
        - name: miner4-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner4; mkdir /etc/testnet/miner4; rm -rf /etc/besu/miner4;
            mkdir -p /etc/besu/miner4;
            cp /etc/besuconfigmap/miner4/besuconfig.toml /etc/besu/miner4;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner4/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner4/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner4-persistent-storage
            mountPath: /etc/testnet/miner4
          - name: miner4-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner4
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner4/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner4
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner4-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner4
        - name: miner4-config-persistent-storage
          configMap:
            name: besuconfig-miner4
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 4=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner4-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner4-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner4
    ports:
      - name: miner4-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner4-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner4-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner4-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 4=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner4
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner4"
#--------------------------=PERSISTENT VOLUME CLAIM 4=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner4
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 5 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner5
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner5
  data:
    key: |-
      0x7cc45fff7c7238c3d02fc92fe8de27226f264a2ea614083363e3bb2dbf5a42d3

#---------------------------------=CONFIG MAP NODE 5=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner5
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner5
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner5
      serviceSelector: ethereum-node
    name: besu-miner5
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner5
    template:
      metadata:
        name: besu-miner5
        labels:
          app: miner
          tier: backend
          name: miner5
      spec:
        containers:
        - name: miner5-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner5; mkdir /etc/testnet/miner5; rm -rf /etc/besu/miner5;
            mkdir -p /etc/besu/miner5;
            cp /etc/besuconfigmap/miner5/besuconfig.toml /etc/besu/miner5;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner5/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner5/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner5-persistent-storage
            mountPath: /etc/testnet/miner5
          - name: miner5-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner5
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner5/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner5
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner5-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner5
        - name: miner5-config-persistent-storage
          configMap:
            name: besuconfig-miner5
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 5=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner5-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner5-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner5
    ports:
      - name: miner5-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner5-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner5-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner5-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 5=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner5
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner5"
#--------------------------=PERSISTENT VOLUME CLAIM 5=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner5
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 6 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner6
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner6
  data:
    key: |-
      0x04c5d4f1dd2a42e765cc8df8125b9f6b27b3df43e87c936c6518968c48d55b48

#---------------------------------=CONFIG MAP NODE 6=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner6
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner6
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner6
      serviceSelector: ethereum-node
    name: besu-miner6
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner6
    template:
      metadata:
        name: besu-miner6
        labels:
          app: miner
          tier: backend
          name: miner6
      spec:
        containers:
        - name: miner6-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner6; mkdir /etc/testnet/miner6; rm -rf /etc/besu/miner6;
            mkdir -p /etc/besu/miner6;
            cp /etc/besuconfigmap/miner6/besuconfig.toml /etc/besu/miner6;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner6/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner6/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner6-persistent-storage
            mountPath: /etc/testnet/miner6
          - name: miner6-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner6
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner6/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner6
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner6-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner6
        - name: miner6-config-persistent-storage
          configMap:
            name: besuconfig-miner6
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 6=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner6-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner6-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner6
    ports:
      - name: miner6-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner6-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner6-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner6-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 6=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner6
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner6"
#--------------------------=PERSISTENT VOLUME CLAIM 6=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner6
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 7 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner7
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner7
  data:
    key: |-
      0x930816f42d23b6c931439760532bde1769445719c8f8afa2670a3604926b3dce

#---------------------------------=CONFIG MAP NODE 7=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner7
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner7
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner7
      serviceSelector: ethereum-node
    name: besu-miner7
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner7
    template:
      metadata:
        name: besu-miner7
        labels:
          app: miner
          tier: backend
          name: miner7
      spec:
        containers:
        - name: miner7-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner7; mkdir /etc/testnet/miner7; rm -rf /etc/besu/miner7;
            mkdir -p /etc/besu/miner7;
            cp /etc/besuconfigmap/miner7/besuconfig.toml /etc/besu/miner7;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner7/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner7/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner7-persistent-storage
            mountPath: /etc/testnet/miner7
          - name: miner7-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner7
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner7/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner7
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner7-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner7
        - name: miner7-config-persistent-storage
          configMap:
            name: besuconfig-miner7
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 7=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner7-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner7-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner7
    ports:
      - name: miner7-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner7-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner7-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner7-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 7=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner7
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner7"
#--------------------------=PERSISTENT VOLUME CLAIM 7=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner7
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 8 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner8
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner8
  data:
    key: |-
      0xf232046a344d99c38e21dec5578e7a9c86a9379bb0eeeb5595803ebe3824f676

#---------------------------------=CONFIG MAP NODE 8=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner8
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner8
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner8
      serviceSelector: ethereum-node
    name: besu-miner8
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner8
    template:
      metadata:
        name: besu-miner8
        labels:
          app: miner
          tier: backend
          name: miner8
      spec:
        containers:
        - name: miner8-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner8; mkdir /etc/testnet/miner8; rm -rf /etc/besu/miner8;
            mkdir -p /etc/besu/miner8;
            cp /etc/besuconfigmap/miner8/besuconfig.toml /etc/besu/miner8;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner8/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner8/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner8-persistent-storage
            mountPath: /etc/testnet/miner8
          - name: miner8-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner8
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner8/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner8
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner8-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner8
        - name: miner8-config-persistent-storage
          configMap:
            name: besuconfig-miner8
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 8=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner8-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner8-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner8
    ports:
      - name: miner8-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner8-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner8-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner8-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 8=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner8
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner8"
#--------------------------=PERSISTENT VOLUME CLAIM 8=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner8
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 9 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner9
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner9
  data:
    key: |-
      0xb798bd4abfe2790dc9eaa0cf85e2d813572f4fa8272e9ef953e6c234963b5757

#---------------------------------=CONFIG MAP NODE 9=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner9
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner9
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner9
      serviceSelector: ethereum-node
    name: besu-miner9
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner9
    template:
      metadata:
        name: besu-miner9
        labels:
          app: miner
          tier: backend
          name: miner9
      spec:
        containers:
        - name: miner9-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner9; mkdir /etc/testnet/miner9; rm -rf /etc/besu/miner9;
            mkdir -p /etc/besu/miner9;
            cp /etc/besuconfigmap/miner9/besuconfig.toml /etc/besu/miner9;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner9/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner9/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner9-persistent-storage
            mountPath: /etc/testnet/miner9
          - name: miner9-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner9
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner9/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner9
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner9-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner9
        - name: miner9-config-persistent-storage
          configMap:
            name: besuconfig-miner9
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 9=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner9-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner9-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner9
    ports:
      - name: miner9-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner9-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner9-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner9-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 9=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner9
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner9"
#--------------------------=PERSISTENT VOLUME CLAIM 9=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner9
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 10 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner10
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner10
  data:
    key: |-
      0xd2e07ec94dc623a00d4ee5637efab895918482d4c8fc54273344f8cd7f8f8b81

#---------------------------------=CONFIG MAP NODE 10=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner10
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner10
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner10
      serviceSelector: ethereum-node
    name: besu-miner10
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner10
    template:
      metadata:
        name: besu-miner10
        labels:
          app: miner
          tier: backend
          name: miner10
      spec:
        containers:
        - name: miner10-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner10; mkdir /etc/testnet/miner10; rm -rf /etc/besu/miner10;
            mkdir -p /etc/besu/miner10;
            cp /etc/besuconfigmap/miner10/besuconfig.toml /etc/besu/miner10;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner10/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner10/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner10-persistent-storage
            mountPath: /etc/testnet/miner10
          - name: miner10-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner10
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner10/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner10
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner10-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner10
        - name: miner10-config-persistent-storage
          configMap:
            name: besuconfig-miner10
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 10=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner10-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner10-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner10
    ports:
      - name: miner10-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner10-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner10-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner10-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 10=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner10
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner10"
#--------------------------=PERSISTENT VOLUME CLAIM 10=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner10
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 11 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner11
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner11
  data:
    key: |-
      0x05950e0dd95818e2662788547185b1c68e2ec669b6b43e1916fcadab16a17176

#---------------------------------=CONFIG MAP NODE 11=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner11
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner11
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner11
      serviceSelector: ethereum-node
    name: besu-miner11
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner11
    template:
      metadata:
        name: besu-miner11
        labels:
          app: miner
          tier: backend
          name: miner11
      spec:
        containers:
        - name: miner11-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner11; mkdir /etc/testnet/miner11; rm -rf /etc/besu/miner11;
            mkdir -p /etc/besu/miner11;
            cp /etc/besuconfigmap/miner11/besuconfig.toml /etc/besu/miner11;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner11/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner11/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner11-persistent-storage
            mountPath: /etc/testnet/miner11
          - name: miner11-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner11
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner11/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner11
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner11-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner11
        - name: miner11-config-persistent-storage
          configMap:
            name: besuconfig-miner11
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 11=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner11-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner11-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner11
    ports:
      - name: miner11-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner11-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner11-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner11-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 11=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner11
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner11"
#--------------------------=PERSISTENT VOLUME CLAIM 11=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner11
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 12 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner12
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner12
  data:
    key: |-
      0x7a5c9250b39e573c7909c859bf4b05a50a5dc9cc0e668e9a8c1ab9de1c7ef071

#---------------------------------=CONFIG MAP NODE 12=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner12
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner12
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner12
      serviceSelector: ethereum-node
    name: besu-miner12
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner12
    template:
      metadata:
        name: besu-miner12
        labels:
          app: miner
          tier: backend
          name: miner12
      spec:
        containers:
        - name: miner12-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner12; mkdir /etc/testnet/miner12; rm -rf /etc/besu/miner12;
            mkdir -p /etc/besu/miner12;
            cp /etc/besuconfigmap/miner12/besuconfig.toml /etc/besu/miner12;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner12/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner12/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner12-persistent-storage
            mountPath: /etc/testnet/miner12
          - name: miner12-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner12
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner12/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner12
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner12-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner12
        - name: miner12-config-persistent-storage
          configMap:
            name: besuconfig-miner12
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 12=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner12-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner12-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner12
    ports:
      - name: miner12-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner12-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner12-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner12-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 12=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner12
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner12"
#--------------------------=PERSISTENT VOLUME CLAIM 12=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner12
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 13 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner13
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner13
  data:
    key: |-
      0xadb01031fa941e938e3c38e0338f44a0225589bae25910becd18d539aee8c60f

#---------------------------------=CONFIG MAP NODE 13=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner13
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner13
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner13
      serviceSelector: ethereum-node
    name: besu-miner13
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner13
    template:
      metadata:
        name: besu-miner13
        labels:
          app: miner
          tier: backend
          name: miner13
      spec:
        containers:
        - name: miner13-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner13; mkdir /etc/testnet/miner13; rm -rf /etc/besu/miner13;
            mkdir -p /etc/besu/miner13;
            cp /etc/besuconfigmap/miner13/besuconfig.toml /etc/besu/miner13;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner13/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner13/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner13-persistent-storage
            mountPath: /etc/testnet/miner13
          - name: miner13-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner13
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner13/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner13
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner13-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner13
        - name: miner13-config-persistent-storage
          configMap:
            name: besuconfig-miner13
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 13=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner13-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner13-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner13
    ports:
      - name: miner13-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner13-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner13-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner13-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 13=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner13
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner13"
#--------------------------=PERSISTENT VOLUME CLAIM 13=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner13
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 14 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner14
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner14
  data:
    key: |-
      0x86ecfc743d5efa912506db412d2f83eda6d63971fa0f5203b70d8aaec61a30a2

#---------------------------------=CONFIG MAP NODE 14=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner14
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner14
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner14
      serviceSelector: ethereum-node
    name: besu-miner14
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner14
    template:
      metadata:
        name: besu-miner14
        labels:
          app: miner
          tier: backend
          name: miner14
      spec:
        containers:
        - name: miner14-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner14; mkdir /etc/testnet/miner14; rm -rf /etc/besu/miner14;
            mkdir -p /etc/besu/miner14;
            cp /etc/besuconfigmap/miner14/besuconfig.toml /etc/besu/miner14;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner14/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner14/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner14-persistent-storage
            mountPath: /etc/testnet/miner14
          - name: miner14-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner14
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner14/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner14
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner14-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner14
        - name: miner14-config-persistent-storage
          configMap:
            name: besuconfig-miner14
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 14=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner14-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner14-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner14
    ports:
      - name: miner14-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner14-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner14-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner14-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 14=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner14
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner14"
#--------------------------=PERSISTENT VOLUME CLAIM 14=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner14
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 15 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner15
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner15
  data:
    key: |-
      0x315e04dbffbf37938e0442f6fea7fbbff34c99d98a4fa1c904ed239295ec25dc

#---------------------------------=CONFIG MAP NODE 15=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner15
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner15
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner15
      serviceSelector: ethereum-node
    name: besu-miner15
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner15
    template:
      metadata:
        name: besu-miner15
        labels:
          app: miner
          tier: backend
          name: miner15
      spec:
        containers:
        - name: miner15-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner15; mkdir /etc/testnet/miner15; rm -rf /etc/besu/miner15;
            mkdir -p /etc/besu/miner15;
            cp /etc/besuconfigmap/miner15/besuconfig.toml /etc/besu/miner15;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner15/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner15/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner15-persistent-storage
            mountPath: /etc/testnet/miner15
          - name: miner15-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner15
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner15/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner15
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner15-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner15
        - name: miner15-config-persistent-storage
          configMap:
            name: besuconfig-miner15
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 15=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner15-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner15-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner15
    ports:
      - name: miner15-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner15-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner15-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner15-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 15=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner15
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner15"
#--------------------------=PERSISTENT VOLUME CLAIM 15=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner15
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 16 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner16
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner16
  data:
    key: |-
      0x7a084d1ff1e19243c36e8ee03aa832fc56ec05a3047992de7a397157cb05935b

#---------------------------------=CONFIG MAP NODE 16=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner16
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner16
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner16
      serviceSelector: ethereum-node
    name: besu-miner16
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner16
    template:
      metadata:
        name: besu-miner16
        labels:
          app: miner
          tier: backend
          name: miner16
      spec:
        containers:
        - name: miner16-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner16; mkdir /etc/testnet/miner16; rm -rf /etc/besu/miner16;
            mkdir -p /etc/besu/miner16;
            cp /etc/besuconfigmap/miner16/besuconfig.toml /etc/besu/miner16;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner16/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner16/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner16-persistent-storage
            mountPath: /etc/testnet/miner16
          - name: miner16-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner16
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner16/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner16
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner16-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner16
        - name: miner16-config-persistent-storage
          configMap:
            name: besuconfig-miner16
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 16=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner16-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner16-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner16
    ports:
      - name: miner16-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner16-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner16-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner16-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 16=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner16
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner16"
#--------------------------=PERSISTENT VOLUME CLAIM 16=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner16
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 17 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner17
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner17
  data:
    key: |-
      0xbbd05e615425e2db4493b54ee2445fa7e56041bd83007353089a1513d841db89

#---------------------------------=CONFIG MAP NODE 17=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner17
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner17
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner17
      serviceSelector: ethereum-node
    name: besu-miner17
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner17
    template:
      metadata:
        name: besu-miner17
        labels:
          app: miner
          tier: backend
          name: miner17
      spec:
        containers:
        - name: miner17-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner17; mkdir /etc/testnet/miner17; rm -rf /etc/besu/miner17;
            mkdir -p /etc/besu/miner17;
            cp /etc/besuconfigmap/miner17/besuconfig.toml /etc/besu/miner17;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner17/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner17/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner17-persistent-storage
            mountPath: /etc/testnet/miner17
          - name: miner17-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner17
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner17/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner17
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner17-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner17
        - name: miner17-config-persistent-storage
          configMap:
            name: besuconfig-miner17
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 17=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner17-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner17-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner17
    ports:
      - name: miner17-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner17-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner17-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner17-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 17=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner17
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner17"
#--------------------------=PERSISTENT VOLUME CLAIM 17=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner17
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 18 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner18
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner18
  data:
    key: |-
      0x895d049e94a6bb3d02293213853e389b4c13f053bafdd1a1e48f597edc6e86f3

#---------------------------------=CONFIG MAP NODE 18=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner18
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner18
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner18
      serviceSelector: ethereum-node
    name: besu-miner18
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner18
    template:
      metadata:
        name: besu-miner18
        labels:
          app: miner
          tier: backend
          name: miner18
      spec:
        containers:
        - name: miner18-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner18; mkdir /etc/testnet/miner18; rm -rf /etc/besu/miner18;
            mkdir -p /etc/besu/miner18;
            cp /etc/besuconfigmap/miner18/besuconfig.toml /etc/besu/miner18;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner18/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner18/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner18-persistent-storage
            mountPath: /etc/testnet/miner18
          - name: miner18-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner18
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner18/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner18
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner18-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner18
        - name: miner18-config-persistent-storage
          configMap:
            name: besuconfig-miner18
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 18=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner18-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner18-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner18
    ports:
      - name: miner18-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner18-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner18-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner18-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 18=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner18
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner18"
#--------------------------=PERSISTENT VOLUME CLAIM 18=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner18
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 19 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner19
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner19
  data:
    key: |-
      0x18dd9012778e383758b2adaba9383732b38173781be1c243d31a4b16d6a9d399

#---------------------------------=CONFIG MAP NODE 19=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner19
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner19
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner19
      serviceSelector: ethereum-node
    name: besu-miner19
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner19
    template:
      metadata:
        name: besu-miner19
        labels:
          app: miner
          tier: backend
          name: miner19
      spec:
        containers:
        - name: miner19-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner19; mkdir /etc/testnet/miner19; rm -rf /etc/besu/miner19;
            mkdir -p /etc/besu/miner19;
            cp /etc/besuconfigmap/miner19/besuconfig.toml /etc/besu/miner19;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner19/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner19/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner19-persistent-storage
            mountPath: /etc/testnet/miner19
          - name: miner19-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner19
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner19/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner19
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner19-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner19
        - name: miner19-config-persistent-storage
          configMap:
            name: besuconfig-miner19
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 19=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner19-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner19-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner19
    ports:
      - name: miner19-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner19-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner19-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner19-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 19=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner19
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner19"
#--------------------------=PERSISTENT VOLUME CLAIM 19=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner19
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 20 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner20
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner20
  data:
    key: |-
      0x9f9be07afff4ad468f1cb15170dc00893454b21d2fb75aa46844354be6211383

#---------------------------------=CONFIG MAP NODE 20=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner20
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner20
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner20
      serviceSelector: ethereum-node
    name: besu-miner20
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner20
    template:
      metadata:
        name: besu-miner20
        labels:
          app: miner
          tier: backend
          name: miner20
      spec:
        containers:
        - name: miner20-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner20; mkdir /etc/testnet/miner20; rm -rf /etc/besu/miner20;
            mkdir -p /etc/besu/miner20;
            cp /etc/besuconfigmap/miner20/besuconfig.toml /etc/besu/miner20;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner20/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner20/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner20-persistent-storage
            mountPath: /etc/testnet/miner20
          - name: miner20-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner20
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner20/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner20
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner20-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner20
        - name: miner20-config-persistent-storage
          configMap:
            name: besuconfig-miner20
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 20=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner20-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner20-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner20
    ports:
      - name: miner20-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner20-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner20-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner20-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 20=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner20
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner20"
#--------------------------=PERSISTENT VOLUME CLAIM 20=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner20
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 21 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner21
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner21
  data:
    key: |-
      0xbe2572369208ca08e8f959fed902cfffba5ba265554b7c6162cf37562d9f26f0

#---------------------------------=CONFIG MAP NODE 21=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner21
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner21
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner21
      serviceSelector: ethereum-node
    name: besu-miner21
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner21
    template:
      metadata:
        name: besu-miner21
        labels:
          app: miner
          tier: backend
          name: miner21
      spec:
        containers:
        - name: miner21-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner21; mkdir /etc/testnet/miner21; rm -rf /etc/besu/miner21;
            mkdir -p /etc/besu/miner21;
            cp /etc/besuconfigmap/miner21/besuconfig.toml /etc/besu/miner21;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner21/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner21/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner21-persistent-storage
            mountPath: /etc/testnet/miner21
          - name: miner21-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner21
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner21/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner21
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner21-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner21
        - name: miner21-config-persistent-storage
          configMap:
            name: besuconfig-miner21
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 21=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner21-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner21-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner21
    ports:
      - name: miner21-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner21-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner21-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner21-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 21=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner21
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner21"
#--------------------------=PERSISTENT VOLUME CLAIM 21=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner21
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 22 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner22
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner22
  data:
    key: |-
      0x61dcd9580af184a9e4947be0aed699f301a880dd6b8dce51e7b2a46b83c3f7df

#---------------------------------=CONFIG MAP NODE 22=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner22
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner22
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner22
      serviceSelector: ethereum-node
    name: besu-miner22
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner22
    template:
      metadata:
        name: besu-miner22
        labels:
          app: miner
          tier: backend
          name: miner22
      spec:
        containers:
        - name: miner22-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner22; mkdir /etc/testnet/miner22; rm -rf /etc/besu/miner22;
            mkdir -p /etc/besu/miner22;
            cp /etc/besuconfigmap/miner22/besuconfig.toml /etc/besu/miner22;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner22/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner22/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner22-persistent-storage
            mountPath: /etc/testnet/miner22
          - name: miner22-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner22
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner22/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner22
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner22-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner22
        - name: miner22-config-persistent-storage
          configMap:
            name: besuconfig-miner22
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 22=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner22-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner22-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner22
    ports:
      - name: miner22-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner22-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner22-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner22-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 22=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner22
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner22"
#--------------------------=PERSISTENT VOLUME CLAIM 22=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner22
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 23 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner23
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner23
  data:
    key: |-
      0x1f8dfd194471b7ec894ba67faeea58303711150c16c4942a1e89d2ec4f53d67e

#---------------------------------=CONFIG MAP NODE 23=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner23
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner23
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner23
      serviceSelector: ethereum-node
    name: besu-miner23
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner23
    template:
      metadata:
        name: besu-miner23
        labels:
          app: miner
          tier: backend
          name: miner23
      spec:
        containers:
        - name: miner23-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner23; mkdir /etc/testnet/miner23; rm -rf /etc/besu/miner23;
            mkdir -p /etc/besu/miner23;
            cp /etc/besuconfigmap/miner23/besuconfig.toml /etc/besu/miner23;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner23/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner23/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner23-persistent-storage
            mountPath: /etc/testnet/miner23
          - name: miner23-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner23
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner23/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner23
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner23-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner23
        - name: miner23-config-persistent-storage
          configMap:
            name: besuconfig-miner23
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 23=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner23-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner23-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner23
    ports:
      - name: miner23-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner23-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner23-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner23-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 23=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner23
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner23"
#--------------------------=PERSISTENT VOLUME CLAIM 23=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner23
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


# --------------------------=== POD DEPLOYMENT 24 ===--------------------------

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: keystore-config-miner24
    namespace: ethereum-net
    labels:
      app: miner
      name: keystore-config-miner24
  data:
    key: |-
      0x9b833e0a315a88032cd757a4d3b777461da15fed0aeae5ac4bbbf3a4e6e47d4b

#---------------------------------=CONFIG MAP NODE 24=---------------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: besuconfig-miner24
    namespace: ethereum-net
    labels:
      app: miner
      name: besuconfig-miner24
  data:
    besuconfig: |-
      network-id=123456
      rpc-http-enabled=true
      rpc-http-api=["ETH","NET","IBFT","WEB3","ADMIN","TXPOOL"] 
      host-whitelist=["*"]
      rpc-http-cors-origins=["*"] 
      rpc-http-port=8545
      rpc-http-host="0.0.0.0"
      rpc-ws-enabled=true
      rpc-ws-host="0.0.0.0"
      rpc-ws-port=8546
      rpc-ws-api=["ETH","NET","CLIQUE","WEB3","ADMIN","TXPOOL"]
      min-gas-price=0
      target-gas-limit="715000000"
      tx-pool-max-size="80000000"
      tx-pool-hashes-max-size="80000000"
      

- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: besu-miner24
      serviceSelector: ethereum-node
    name: besu-miner24
  spec:
    selector:
      matchLabels:
        app: miner
    replicas: 1
    serviceName: besu-miner24
    template:
      metadata:
        name: besu-miner24
        labels:
          app: miner
          tier: backend
          name: miner24
      spec:
        containers:
        - name: miner24-init-container
          image: hyperledger/besu:latest
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          command: [ "sh" ]
          args:
          - "-cx"
          - "rm -rf /etc/testnet/miner24; mkdir /etc/testnet/miner24; rm -rf /etc/besu/miner24;
            mkdir -p /etc/besu/miner24;
            cp /etc/besuconfigmap/miner24/besuconfig.toml /etc/besu/miner24;
            /opt/besu/bin/besu --data-path=/etc/testnet/miner24/data --genesis-file=/etc/besu/genesis/genesis-besu.json --config-file=/etc/besu/miner24/besuconfig.toml --bootnodes=enode://80492727fe2e43dfa991496b6bfa7cedd28d7a48a6582350226cf96a5157073cff1543a4689342d364b6fb0f671e5bf9b9fdecf44cb099ffe3e75d2719e199fc@$BESU_BOOTNODE_SVC_SERVICE_HOST:30303;"
          ports:
            - containerPort: 8545
            - containerPort: 8546
              protocol: UDP
            - containerPort: 30303
          volumeMounts:
          - name: miner24-persistent-storage
            mountPath: /etc/testnet/miner24
          - name: miner24-config-persistent-storage
            mountPath: /etc/besuconfigmap/miner24
          - name: keystore-config-persistent-storage
            mountPath: /etc/testnet/miner24/data/key
            subPath: key
          - name: besu-boot-node-persistent-storage
            mountPath: /etc/testnet/bootnode
          - name: genesis-config-persistent-storage
            mountPath: /etc/besu/genesis/genesis-besu.json
            subPath: genesis-besu.json
        
        volumes:
        - name: keystore-config-persistent-storage
          configMap:
            name: keystore-config-miner24
            items:
            - key: key
              path: key
        - name: besu-boot-node-persistent-storage
          hostPath:
            path: /var/lib/docker/besu-storage/bootnode
        - name: genesis-config-persistent-storage
          configMap:
            name: genesis-config
            items:
            - key: genesis-besu.json
              path: genesis-besu.json
        - name: miner24-persistent-storage
          persistentVolumeClaim:
          claimName: volume-miner24
        - name: miner24-config-persistent-storage
          configMap:
            name: besuconfig-miner24
            items:
            - key: besuconfig
              path: besuconfig.toml
        
          

#---------------------------------=NODES SERVICES 24=---------------------------------------
- apiVersion: v1
  kind: Service
  metadata:
    name: miner24-svc
    namespace: ethereum-net
    labels:
      app: miner
      tier: backend
      name: miner24-svc
  spec:
    selector:
      app: miner
      tier: backend
      name: miner24
    ports:
      - name: miner24-jsonrpc
        protocol: TCP
        port: 8545
        targetPort: 8545
      - name: miner24-wsrpc
        protocol: TCP
        port: 8546
        targetPort: 8546
      - name: miner24-ipc-discovery
        protocol: TCP
        port: 30303
        targetPort: 30303     
      - name: miner24-prometheusrpc
        protocol: TCP
        port: 9545
        targetPort: 9545
      
#---------------------------------=NODES PERSISTANT VOLUME 24=---------------------------------------
- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: miner24
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 20Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/miner24"
#--------------------------=PERSISTENT VOLUME CLAIM 24=------------------------------

- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: volume-miner24
    namespace: ethereum-net
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 20Gi


#--------------------------=ONE SERVICE FOR ALL NODE (websocket)=--------------------------------

- apiVersion: v1
  kind: Service
  metadata:
    name: ethereum-ws-service
    namespace: ethereum-net
  spec:
    type: ClusterIP
    selector:
      app: miner 
    ports:
      - name: "8546"
        protocol: TCP
        port: 8546
        targetPort: 8546

#--------------------------=ONE SERVICE FOR ALL NODE (HTTP)=--------------------------------

- apiVersion: v1
  kind: Service
  metadata:
    name: ethereum-http-service
    namespace: ethereum-net
  spec:
    type: ClusterIP
    selector:
      app: miner 
    ports:
      - name: "8545"
        protocol: TCP
        port: 8545
        targetPort: 8545
#--------------------------= genesis-config =--------------------------------
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: genesis-config
    namespace: ethereum-net
    labels:
      app: kuberneteth
      name: genesis-config
  data:
    genesis-besu.json: |-
      {
        "config": {
          "chainId": 123456,
          "muirglacierblock": 0,
          "ibft2": {
            "blockperiodseconds": 2,
            "epochlength": 30000,
            "requesttimeoutseconds": 4
            }
        },
        "nonce": "0x0",
        "timestamp": "0x5cdec502",
        "gasLimit": "0x2A9E08C0",
        "difficulty" : "0x1",
        "mixHash": "0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365",
        "coinbase": "0x0000000000000000000000000000000000000000",
        "extraData": "0xf90238a00000000000000000000000000000000000000000000000000000000000000000f9020d94033c007add93008949e50420cb8cb719f1437b3d941adc1efb2e45e4465f1d7dbe861fe108377d0d6494279e295979c94b3a6f4602f35cad8660bff762db943ec844a79db1f0371cacf5b63b4cc9a42a2dfa8e945ca4b4d85d68b21571b7a1cd6b77f3fce7de15e5945ee364876ad13587ac27ee3b2b1251147c3797ca94704340fb15e92cb0850b490ad1ee72ee1fa06a5e9477ddc945a34a09d9b3f598bb84df9a47326c0514947f9c49ebb106e62d1bfdf305212a8e3a618e55419480863526c055f767a2840ec6fd029ecbefb91203948460ba423ced5cb2f8618f3c0402779750996b6c948656c932ec452b56dc30d7520411c609cef37be8948f142be32db4ba3e39980488217ab182d9764b1094976b206e4ab8a620bc60c7cfdd5bdae24122188f949e0cc13250ced5c7dc887c3002fda9ee716c865b94a6244cdb6695c3ba1ec1b755191dde1918fb3a0a94a9179cb6dc3d9a72120cc33be8d04070318c396f94af485edc5e3945931bf3dd97f236bee3288c5da994afab35a28c17797182cb32d3b4322227b5f2905294b10a8dab74e7f1d4c055bb04ace0e2dfe1d9cc4694d653532ef4937ec9b6e5ac84963d4ce2eaa8eb1f94e127a86fd1ca1436c0beea839bde9c2d1a28384494ea8578b7bfebcd1f28667eec27230db7a9b3a67894f605b41d896d9031ca9390d3211f02bbe8fd9e2694f74945c45d5160fc35f3ab85b3e6ea254bd71922808400000000c0",
        "alloc": {
                        "0x033c007add93008949e50420cb8cb719f1437b3d": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x1adc1efb2e45e4465f1d7dbe861fe108377d0d64": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x279e295979c94b3a6f4602f35cad8660bff762db": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x3ec844a79db1f0371cacf5b63b4cc9a42a2dfa8e": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x5ca4b4d85d68b21571b7a1cd6b77f3fce7de15e5": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x5ee364876ad13587ac27ee3b2b1251147c3797ca": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x704340fb15e92cb0850b490ad1ee72ee1fa06a5e": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x77ddc945a34a09d9b3f598bb84df9a47326c0514": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x7f9c49ebb106e62d1bfdf305212a8e3a618e5541": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x80863526c055f767a2840ec6fd029ecbefb91203": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x8460ba423ced5cb2f8618f3c0402779750996b6c": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x8656c932ec452b56dc30d7520411c609cef37be8": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x8f142be32db4ba3e39980488217ab182d9764b10": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x976b206e4ab8a620bc60c7cfdd5bdae24122188f": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0x9e0cc13250ced5c7dc887c3002fda9ee716c865b": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xa6244cdb6695c3ba1ec1b755191dde1918fb3a0a": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xa9179cb6dc3d9a72120cc33be8d04070318c396f": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xaf485edc5e3945931bf3dd97f236bee3288c5da9": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xafab35a28c17797182cb32d3b4322227b5f29052": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xb10a8dab74e7f1d4c055bb04ace0e2dfe1d9cc46": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xd653532ef4937ec9b6e5ac84963d4ce2eaa8eb1f": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xe127a86fd1ca1436c0beea839bde9c2d1a283844": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xea8578b7bfebcd1f28667eec27230db7a9b3a678": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xf605b41d896d9031ca9390d3211f02bbe8fd9e26": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            },            "0xf74945c45d5160fc35f3ab85b3e6ea254bd71922": {
              "balance": "0x200000000000000000000000000000000000000000000000000000000000000"
            }
        },
        "number": "0x0",
        "gasUsed": "0x0",
        "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000"
      }
####################################### ETH MONITOR STUFF #########################
- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    #creationTimestamp: null
    namespace: ethereum-net
    labels:
      name: volume-ethmonitor
    name: volume-ethmonitor
  spec:
    storageClassName: manual
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 10Gi

- apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: monitor
    labels:
      type: local
  spec:
    storageClassName: manual
    capacity:
      storage: 10Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Delete
    hostPath:
      #type: DirectoryOrCreate
      path: "/datas/monitor"

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: monitor-config
    namespace: ethereum-net
    labels:
      app: kuberneteth
      name: monitor-config
  data:
    app.json: |-
      [
                {
          "name"              : "miner1",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner1-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner1",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner2",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner2-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner2",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner3",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner3-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner3",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner4",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner4-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner4",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner5",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner5-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner5",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner6",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner6-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner6",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner7",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner7-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner7",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner8",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner8-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner8",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner9",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner9-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner9",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner10",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner10-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner10",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner11",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner11-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner11",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner12",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner12-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner12",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner13",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner13-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner13",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner14",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner14-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner14",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner15",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner15-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner15",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner16",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner16-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner16",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner17",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner17-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner17",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner18",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner18-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner18",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner19",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner19-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner19",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner20",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner20-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner20",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner21",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner21-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner21",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner22",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner22-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner22",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner23",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner23-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner23",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        },        {
          "name"              : "miner24",
          "cwd"               : ".",
          "script"            : "app.js",
          "log_date_format"   : "YYYY-MM-DD HH:mm Z",
          "merge_logs"        : false,
          "watch"             : false,
          "exec_interpreter"  : "node",
          "exec_mode"         : "fork_mode",
          "env":
          {
            "NODE_ENV"        : "production",
            "RPC_HOST"        : "miner24-rpchost",
            "RPC_PORT"        : "8545",
            "LISTENING_PORT"  : "30303",
            "INSTANCE_NAME"   : "miner24",
            "CONTACT_DETAILS" : "",
            "WS_SERVER"       : "localhost:3001",
            "WS_SECRET"       : "123",
            "VERBOSITY"       : 3
          }
        }
      ]

- apiVersion: v1
  kind: Service
  metadata:
    namespace: ethereum-net
    name: monitor-svc
    labels:
      app: kuberneteth
      tier: frontend
      name: monitor-svc
  spec:
    selector:
      app: kuberneteth
      tier: frontend
    type: ClusterIP
    ports:
      - name: monitor-port
        protocol: TCP
        port: 3001


- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    namespace: ethereum-net
    name: monitor
  spec:
    selector:
      matchLabels:
        app: kuberneteth
    replicas: 1
    serviceName: monitor
    template:
      metadata:
        name: monitor
        labels:
          app: kuberneteth
          tier: frontend
          name: monitor
      spec:
        initContainers:
        - name: monitor-init-container
          image: ijsfd/eth-netstats
          imagePullPolicy: IfNotPresent
          command: [ "sh" ]
          args:
          - "-cx"
          - "cp -r /eth-net-intelligence-api/* /ethmonitor;
            cp /monitor-configmap/app.json /ethmonitor/app.json;
                        sed -i \"s/miner1-rpchost/$MINER1_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner2-rpchost/$MINER2_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner3-rpchost/$MINER3_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner4-rpchost/$MINER4_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner5-rpchost/$MINER5_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner6-rpchost/$MINER6_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner7-rpchost/$MINER7_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner8-rpchost/$MINER8_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner9-rpchost/$MINER9_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner10-rpchost/$MINER10_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner11-rpchost/$MINER11_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner12-rpchost/$MINER12_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner13-rpchost/$MINER13_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner14-rpchost/$MINER14_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner15-rpchost/$MINER15_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner16-rpchost/$MINER16_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner17-rpchost/$MINER17_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner18-rpchost/$MINER18_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner19-rpchost/$MINER19_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner20-rpchost/$MINER20_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner21-rpchost/$MINER21_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner22-rpchost/$MINER22_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner23-rpchost/$MINER23_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
             sed -i \"s/miner24-rpchost/$MINER24_SVC_SERVICE_HOST/g\" /ethmonitor/app.json;
 
            exit 0;"
          volumeMounts:
          - name: monitor-configmap-volume
            mountPath: /monitor-configmap/app.json
            subPath: app.json
          - name: monitor-config-temp
            mountPath: /ethmonitor
        containers:
        - name: eth-netstats-container
          image: ijsfd/eth-netstats
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 3001
          env:
          - name: WS_SECRET
            value: "123"
          - name: PORT
            value: "3001"
        - name: eth-net-intelligence-api-container
          image: ijsfd/eth-net-intelligence-api
          imagePullPolicy: IfNotPresent
          volumeMounts:
          - name: monitor-config-temp 
            mountPath: /eth-net-intelligence-api/app.json
            subPath: app.json
        volumes:
        - name: monitor-configmap-volume
          configMap:
            name: monitor-config
            items:
            - key: app.json
              path: app.json
        - name: monitor-config-persistent-storage
          persistentVolumeClaim:
            claimName: volume-ethmonitor
        - name: monitor-config-temp
          emptyDir: {} 

####################################### BENCHMARK MACHINE #########################

- apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: ubuntu
    namespace: ethereum-net
  spec:
    replicas: 1
    selector:
        matchLabels:
          name: ubuntu-deployment
    template:
      metadata:
        name: ubuntu-deployment
        labels:
          app: ubuntu
          tier: backend
          name: ubuntu-deployment
      spec:
        containers:
        - name: ubuntu
          image: ubuntu
          command:
            - "sleep"
            - "604800"
          resources:
            limits:
              cpu: "12"
              memory: "12Gi"
            requests:
              cpu: "10"
              memory: "10Gi"
          imagePullPolicy: IfNotPresent
        restartPolicy: Always
####################################### MongoDB MACHINE #########################
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    name: mongodb-standalone
  spec:
    serviceName: database
    replicas: 1
    selector:
      matchLabels:
        app: database
    template:
      metadata:
        labels:
          app: database
          selector: mongodb-standalone
      spec:
        containers:
        - name: mongodb-standalone
          image: mongo:4.0.8
          env:
            - name: MONGO_INITDB_ROOT_USERNAME
              value: guest
            - name: MONGO_INITDB_ROOT_PASSWORD
              value: guest
          resources:
              limits:
                cpu: "12"
                memory: "12Gi"
              requests:
                cpu: "10"
                memory: "10Gi"
          imagePullPolicy: IfNotPresent
        restartPolicy: Always

